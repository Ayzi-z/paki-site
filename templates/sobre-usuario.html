
{% extends 'base.html'%}
{% block tituloPagina %}
    <title>Sobre o Usuário - P.A.K.I</title>
{% endblock %}
{% block conteudoPagina %}
<div class="container-perfil-usuario">
    <div class="perfil-header">
        <div class="sobre-usuario-container">
            <div class="info-usuario-sobre">
                {% if current_user.is_authenticated %}
                <h1>{{ current_user.nome|title }}</h1>
                <h2>{{ current_user.tipo|capitalize }}</h2>
                <p class="email">{{ current_user.email }}</p>
                {% else %}
                <h1>Convidado</h1>
                <h2>Visitante</h2>
                {% endif %}
            </div>
        </div>
    </div>

    <div class="abas-perfil">
        <button class="aba ativa" onclick="mudarAba('dados')">Dados Pessoais</button>
        <button class="aba" onclick="mudarAba('profissional')">Informações Profissionais</button>
        <button class="aba" onclick="mudarAba('seguranca')">Segurança</button>
        {% if current_user.tipo == 'admin' %}
        <button class="aba" onclick="mudarAba('admin')">Administração</button>
        {% endif %}
    </div>

    <div class="conteudo-abas">

        <!-- Aba Dados Pessoais -->
        <div id="aba-dados" class="aba-conteudo ativa">
            <form class="formulario-perfil">
                <div class="linha-formulario">
                    <div class="grupo-formulario">
                        <label>Nome Completo</label>
                        <input type="text" value="{{ usuario.nome }} {{ usuario.sobrenome }}" readonly>
                    </div>
                    <div class="grupo-formulario">
                        <label>Data de Nascimento</label>
                        <input type="text" value="{{ usuario.data_nascimento }}" readonly>
                    </div>
                </div>

                <div class="linha-formulario">
                    <div class="grupo-formulario">
                        <label>Telefone</label>
                        <input type="text" value="{{ usuario.telefone }}" readonly>
                    </div>
                    <div class="grupo-formulario">
                        <label>Gênero</label>
                        <input type="text" value="{{ usuario.genero|capitalize }}" readonly>
                    </div>
                </div>
            </form>
        </div>

        <!-- Aba Informações Profissionais -->
        <div id="aba-profissional" class="aba-conteudo">
            {% if usuario.tipo == 'medico' %}
            <form class="formulario-perfil">
                <div class="grupo-formulario">
                    <label>Especialidade</label>
                    <input type="text" value="{{ usuario.especialidade or 'Não informada' }}" readonly>
                </div>
                <div class="grupo-formulario">
                    <label>Horário de Atendimento</label>
                    <input type="text" value="{{ usuario.horario_atendimento or 'Não informado' }}" readonly>
                </div>
            </form>
            {% else %}
            <p>Informações profissionais não disponíveis para este tipo de usuário.</p>
            {% endif %}
        </div>

        <!-- Aba Segurança -->
        <div id="aba-seguranca" class="aba-conteudo">
            <form class="formulario-perfil">
                <div class="grupo-formulario">
                    <label>Email</label>
                    <input type="email" value="{{ usuario.email }}" readonly>
                </div>
            </form>
        </div>

        <!-- Aba Administração (apenas para admin) -->
        {% if current_user.tipo == 'admin' %}
        <div id="aba-admin" class="aba-conteudo">
            <div class="admin-actions">
                <a href="/gerenciarusuarios" class="botao-admin">Gerenciar Usuários</a>
                <a href="/relatorios" class="botao-admin">Relatórios do Sistema</a>
                <a href="/configuracoes" class="botao-admin">Configurações</a>
            </div>
        </div>
        {% endif %}

    </div>
</div>

<script>
function mudarAba(aba) {
    document.querySelectorAll('.aba').forEach(btn => btn.classList.remove('ativa'));
    document.querySelectorAll('.aba-conteudo').forEach(conteudo => conteudo.classList.remove('ativa'));

    document.querySelector(`[onclick="mudarAba('${aba}')"]`).classList.add('ativa');
    document.getElementById(`aba-${aba}`).classList.add('ativa');
}
</script>
{% endblock %}
[file content end]